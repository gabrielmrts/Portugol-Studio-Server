apply plugin: 'antlr'

dependencies {

    antlr "org.antlr:antlr4:4.7.2" // use ANTLR version 4
    // implementation files('libs/runtime/postgresql.jar')
    
    // https://mvnrepository.com/artifact/org.antlr/antlr4-runtime
    compile group: 'org.antlr', name: 'antlr4-runtime', version: '4.7.2'

    compile group: 'org.postgresql', name: 'postgresql', version: '42.7.1'
            
    // https://mvnrepository.com/artifact/org.apache.commons/commons-exec
    compile group: 'org.apache.commons', name: 'commons-exec', version: '1.3'
    
    // https://mvnrepository.com/artifact/com.googlecode.soundlibs/jlayer
    runtime group: 'com.googlecode.soundlibs', name: 'jlayer', version: '1.0.1-1'
    
    // https://mvnrepository.com/artifact/com.googlecode.soundlibs/mp3spi
    runtime group: 'com.googlecode.soundlibs', name: 'mp3spi', version: '1.9.5-1'
    
    // https://mvnrepository.com/artifact/com.googlecode.soundlibs/tritonus-share
    runtime group: 'com.googlecode.soundlibs', name: 'tritonus-share', version: '0.3.7.4'
    
    // https://mvnrepository.com/artifact/org.apache.httpcomponents/fluent-hc
    compile group: 'org.apache.httpcomponents', name: 'fluent-hc', version: '4.5.5'
       
    //https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.5'
    
    //https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.9.5'
    
    //https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-xml
    compile group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-xml', version: '2.9.5'
    
    // https://mvnrepository.com/artifact/org.json/json
    compile group: 'org.json', name: 'json', version: '20170516'
    
    // Talvez possa ser substituído pela dependência abaixo
    // https://mvnrepository.com/artifact/javax.media/jmf
    //compile group: 'javax.media', name: 'jmf', version: 'fs-3.0'
}

generateGrammarSource {

    def classesPackage = "br.univali.portugol.nucleo.analise.sintatica.antlr4";
    def sourceDir = "src/main/java/" + classesPackage.replace('.', '/');

    arguments += ["-visitor", "-no-listener", "-package", classesPackage.toString()]

    doLast {
        copy { // copia os arquivos gerados pelo Antlr para a pasta sources
            from "${buildDir}/generated-src/antlr/main/"
            include "*.java*"
            into "${sourceDir}"
        }
        project.delete fileTree("${buildDir}/generated-src/antlr/main").include("*.*")
    }
}

